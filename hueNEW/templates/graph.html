<!DOCTYPE html>
<html lang="en">
  
  <head>
    {% include 'base_head.html' %}
  </head>
  <body>
    
  {% include 'base_header.html' %}

    <div class="container">
      {% include 'base_hero.html' %}
      <section>
        <button type="button" class="btn btn-primary btn-graphTypeForm" value="line">Line</button>
        <button type="button" class="btn btn-primary btn-graphTypeForm" value="area">Area</button>
        <button type="button" class="btn btn-primary btn-graphTypeForm" value="bar">Bar</button>
        <button type="button" class="btn btn-primary btn-graphTypeForm" value="scatterplot">scatterplot</button>
      </section>
   
   <div id="chart_container">
    <div class="row">
      <div class="span8">
        <div id="chart"></div>
      </div>
      <div class="span4">
        <div id="legend"></div>
      </div>
    </div>
  <div id="legend_container">
    <div id="smoother" title="Smoothing"></div>
    
  </div>
  <div id="slider"></div>
</div>


  

      <div class="row">
        <div class="span4">
          <img src="http://i.imgur.com/Asf2J.jpg" style=" width: 200px; height: 261px;">
        </div>
        <div class="span4">
          <img src="http://i.imgur.com/Asf2J.jpg" style=" width: 200px; height: 261px;">
        </div>
        <div class="span4">
          <img src="http://i.imgur.com/Asf2J.jpg" style=" width: 200px; height: 261px;">
        </div>
      </div>
      <hr>
      <div>
        Â© hueKNEW
      </div>
    </div>

    <script type="text/javascript" src="{{ MEDIA_URL }}js/libraries/bootstrap.min.js"></script>
    <script type="text/javascript" src="{{ MEDIA_URL }}js/libraries/underscore.js"></script>
    
    <script type="text/javascript" src="{{ MEDIA_URL }}js/hearst-api.js"></script>
    <script>

      // set up our data series with 50 random data points

      var palette = new Rickshaw.Color.Palette( { scheme: 'classic9' } );

      // instantiate our graph!

      var graph = new Rickshaw.Graph( {
        element: document.getElementById("chart"),
        width: 600,
        height: 500,
        renderer: 'line',
        // renderer: 'bar',
        stroke: true,
        series: [
          {
            color: "rgb(0, 23, 255)",
            data: [ { x: -1893456000, y: 25868573 }, { x: -1577923200, y: 29662053 }, { x: -1262304000, y: 34427091 }, { x: -946771200, y: 35976777 }, { x: -631152000, y: 39477986 }, { x: -315619200, y: 44677819 }, { x: 0, y: 49040703 }, { x: 315532800, y: 49135283 }, { x: 631152000, y: 50809229 }, { x: 946684800, y: 53594378 }, { x: 1262304000, y: 55317240 } ],
            name: 'Paris'
          }, {
            color: palette.color(),
            data: [ { x: -1893456000, y: 29888542 }, { x: -1577923200, y: 34019792 }, { x: -1262304000, y: 38594100 }, { x: -946771200, y: 40143332 }, { x: -631152000, y: 44460762 }, { x: -315619200, y: 51619139 }, { x: 0, y: 56571663 }, { x: 315532800, y: 58865670 }, { x: 631152000, y: 59668632 }, { x: 946684800, y: 64392776 }, { x: 1262304000, y: 66927001 } ],
            name: 'Milan'
          }, {
            color: palette.color(),
             data: [ { x: -1893456000, y: 29389330 }, { x: -1577923200, y: 33125803 }, { x: -1262304000, y: 37857633 }, { x: -946771200, y: 41665901 }, { x: -631152000, y: 47197088 }, { x: -315619200, y: 54973113 }, { x: 0, y: 62795367 }, { x: 315532800, y: 75372362 }, { x: 631152000, y: 85445930 }, { x: 946684800, y: 100236820 }, { x: 1262304000, y: 114555744 } ],
            name: 'London'
          }, {
            color: palette.color(),
            data: [ { x: -1893456000, y: 7082086 }, { x: -1577923200, y: 9213920 }, { x: -1262304000, y: 12323836 }, { x: -946771200, y: 14379119 }, { x: -631152000, y: 20189962 }, { x: -315619200, y: 28053104 }, { x: 0, y: 34804193 }, { x: 315532800, y: 43172490 }, { x: 631152000, y: 52786082 }, { x: 946684800, y: 63197932 }, { x: 1262304000, y: 71945553 } ],
            name: 'New York'
          }
        ]
      });
      graph.render();
      // graph.renderer = 'bar';
      
      var legend = new Rickshaw.Graph.Legend( {
        graph: graph,
        element: document.getElementById('legend')

      } );

      var shelving = new Rickshaw.Graph.Behavior.Series.Toggle( {
        graph: graph,
        legend: legend
      } );

      var axes = new Rickshaw.Graph.Axis.Time( {
        graph: graph
      } );
      axes.render();

      //       // var graphTypeForm = $('.btn-graphTypeForm');
      $('.btn-graphTypeForm').click(function(e) {
        var offsetMode = e.target.value;

        if (offsetMode == 'lines') {
                graph.setRenderer('line');
                // graph.offset = 'zero';
        } else {
                // graph.renderer = offsetMode;
                graph.setRenderer(offsetMode);
                // graph.offset = offsetMode;
        }       
        graph.render();
        // graph.update();

      });

      var legend = $('#legend');
      var Hover = Rickshaw.Class.create(Rickshaw.Graph.HoverDetail, {
        render: function(args) {

          legend.innerHTML = args.formattedXValue;

          args.detail.sort(function(a, b) { return a.order - b.order }).forEach( function(d) {

            var line = document.createElement('div');
            line.className = 'line';

            var swatch = document.createElement('div');
            swatch.className = 'swatch';
            swatch.style.backgroundColor = d.series.color;

            var label = document.createElement('div');
            label.className = 'label';
            label.innerHTML = d.name + ": " + d.formattedYValue;

            line.appendChild(swatch);
            line.appendChild(label);

            // legend.appendChild(line);

            var dot = document.createElement('div');
            dot.className = 'dot';
            dot.style.top = graph.y(d.value.y0 + d.value.y) + 'px';
            dot.style.borderColor = d.series.color;

            this.element.appendChild(dot);

            dot.className = 'dot active';

            this.show();

          }, this );
        }

      });

      var hover = new Hover( { graph: graph } ); 

      setTimeout(function () {
        $('li.line').click(function(e){
          $(e.currentTarget).find('.label').text();
        });
      },500);

      // var controls = new RenderControls( {
      //   element: document.querySelector('form'),
      //   graph: graph
      // } );

      // add some data every so often

      // var messages = [
      //   "Changed home page welcome message",
      //   "Minified JS and CSS",
      //   "Changed button color from blue to green",
      //   "Refactored SQL query to use indexed columns",
      //   "Added additional logging for debugging",
      //   "Fixed typo",
      //   "Rewrite conditional logic for clarity",
      //   "Added documentation for new methods"
      // ];

      // setInterval( function() {
      //   random.addData(seriesData);
      //   graph.update();

      // }, 3000 );

      // function addAnnotation(force) {
      //   if (messages.length > 0 && (force || Math.random() >= 0.95)) {
      //     annotator.add(seriesData[2][seriesData[2].length-1].x, messages.shift());
      //   }
      // }

      // addAnnotation(true);
      // setTimeout( function() { setInterval( addAnnotation, 6000 ) }, 6000 );

      </script>
    
  </body>
</html>
